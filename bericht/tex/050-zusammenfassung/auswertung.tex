\subsection{Auswertung}
\label{sec:auswertung}

Der zuvor beschriebene Systementwurf ist ausreichend, um die Anforderungen zu
erfüllen. Es sind Spielgeräte geplant worden, die denen aus Lasertag ähneln,
und mit Infrarot können sich Spieler gegenseitig abschießen. Es sollte mindestens ein
Spielmodus implementiert werden, der an BitTorrent angelehnt ist. Jedoch
wurden weitreichende Anpassungen vorgenommen, um gute Spielbarkeit zu gewährleisten. Es wurden viele weitere
Faktoren bedacht, welche das Spielerlebnis verbessern sollen, etwa die
Möglichkeit Informationen zum Spielstand zu erlangen, oder die freie
Beweglichkeit im Raum. Jedoch ist nicht alles planmäßig verlaufen und der
Entwurf wurde nicht vollständig umgesetzt.

Zuallererst möchten wir auswerten, wie weit die einzelnen Komponenten
entwickelt wurden. Die Hardware bildet die Basis für das Projekt und ist somit
die Voraussetzung für ein funktionierendes System. Die Gruppe hatte sich zum
Ziel gesetzt nicht nur ein stabile Infrastruktur zur Verfügung zu stellen,
sondern auch den darüberliegenden Schichten Komfort zu bieten, indem
hardwarenahe Details abstrahiert werden. Dies hat gut funktioniert und hat die
Kommunikation mit den anderen Gruppen erleichert, weil es nur sehr wenig
Schnittstellen gab. Die Hardwaregruppe hat außerdem die Installation des 
Projekts übernommen, womit sich die Entwickler voll und ganz auf ihre Arbeit
konzentrieren konnten, ohne sich um die Verteilung der Software kümmern zu
müssen. Das Netzwerk hat sich als zuverlässig erwiesen, jedoch ist die
Reichweite noch ausbaufähig. Die Raspberry Pi's haben sich also günstige, aber
sehr effektive Lösung erwiesen und wir konnten mit den Powerbanks die
Geräte komplett ohne externe Kabel realisieren. Allerdings sind sie noch sehr
klobig und die Powerbanks passen nicht rein, wodurch sie die ganze Zeit über
zusätzlich gehalten werden müssen. Insgesamt sind die Geräte nicht sehr schön.
Die LED's machen das ganze Spiel sehr viel lebendiger, indem sie etwas
optisches Feedback bieten, jedoch müssen sich neue Spieler erst mit den Codes
vertraut machen, was vielleicht etwas unintuitiv ist. Die Infrarotübertragung
hat technisch funktioniert, wir sind uns allerdings noch nicht ganz über ihre
Grenzen klar, weil wir Abschüsse nicht genug getestet haben.

Ziel der Spiellogik-Gruppe war die Erstellung mehrerer Spielmodi im Stil von Lasertag, die ein Netzwerkprotokoll für die Spieler erlebbar machen sollten. Dabei fiel die Wahl auf BitTorrent als Grundlage für alle Spielmodi, da wir viele Analogien zwischen der Funktionsweise von BitTorrent und den allgemeinen Prinzipien von Lasertag fanden. Es mussten dabei viele Entscheidungen getroffen werden, die die Spielmodi vereinfachten und in unserer Vorstellung spielbarer machten, jedoch damit auch die Unterschiede zwischen den Spielmodi und BitTorrent vergrößerten. Diese Vereinfachungen bzw. Abwandlungen waren Teil der Anforderungen. Insofern denken wir, dass wir eine gute Balance zwischen Aspekten von BitTorrent und von Lasertag in den Spielmodi gefunden haben. Die Erstellung mehrerer Spielmodi machte es uns zudem möglich, verschiedene Eigenschaften von BitTorrent auf mehrere Spielmodi zu verteilen, um so die Komplexität jedes einzelnen Spielmodus für die Spieler möglichst klein zu halten.
Leider haben wir die Spielmodi nur mit dem Simulator und nicht im Praxiseinsatz, also auf einem echten Spielfeld mit echten Spielern, testen können. Dadurch könnten uns Faktoren, die den Spielverlauf in der Praxis beeinflussen und damit eventuell Anpassungen an den Annahmen und bspw. Punktzahlen der Spielmodi nötig machen würden, völlig unbekannt geblieben sein.
Besonders für das Balancing von Parametern wie Punktzahlen und die Zuweisung der initialen Dateifragmente hätte ein automatisches Testen sinnvoll sein können. Andererseits hätten auch bei automatischen Tests Rahmenbedingungen bzw. Testfälle festgelegt werden müssen, die ohne Daten bzw. Erfahrungen aus der Praxis nur schwer realistisch festgelegt hätten werden können.

Die Service-Gruppe hatte mehrere sehr unterschiedliche Aufgaben zu bewältigen. Das waren zum einem das entwickeln eines Servers,
dessen Aufgabe es ist, die Parameter des aktuellen Spieles, basierend auf Hardware und Logik Input zu verwalten.
Des weiteren musste eine diese Kommunikation zwischen den Service Komponenten und den beiden anderen Gruppen etabliert werden. 
Zuletzt musste noch ein Weg gefunden werden, dem Spieler zu ermöglichen ein Spiel zu erstellen, zu verwalten und zu starten, sowie den derzeitigen Stand abzufragen.
Im Großteil konnten diese Aufgaben alle bewältigt werden. Der Server selbst kann das Spiel konstant aufrecht erhalten und auf 
Input reagieren. Bei Integrationstest zeigte sich jedoch, dass insbesondere Input der Hardwareebene nicht korrekt verarbeitet wird. 
Auch die Kommunikation über LUA mit der Spiellogik ist größtenteils funktionsfähig.
Das Problem des Benutzer Inputs konnte relativ simpel über eine Webseite gelöst werden. 
HTML (und CSS) reichte für die meisten Funktionen dabei aus, für die anderen benötigten Feature könnten JavaScript und 
Flask ausreichend helfen. Zugunsten von Datenpersistenz und einfacher Implementierung simultaner Spiele kommuniziert die Seite 
nicht (wie die anderen Komponenten) schlicht über Googles Protocol Buffers sondern schreibt alle eingegebenen Daten in eine MySQL Datenbank.
Obwohl die Vorteile dieses Systems groß sind hat sich bei dem Versuch der Integration mit dem Server gezeigt, dass viel mehr Probleme 
auftreten als erwartet, was dazu führte, dass sie zur Endpräsentation nicht komplett einsatzfähig war.
------------------ OLD VERSION ------------------



Es gibt zwei Sichten darauf, wieviel von der geplanten Architektur umgesetzt wurden: zum einen die
Implentierung der einzelnen Komponenten, zum anderen die Integration derselben.
Um eine technische Machbarkeit der Lösung zu demonstrieren, reicht es aus, mit Unit-Tests die
Funktionalität der Einzelkomponenten zu beweisen.
Allerdings war als Endprodukt ein Spiel gefordert, wofür es notwendig ist, dass die Integration
reibungslos funktioniert.
Das heißt, ein beliebiger externer Spieler kann das System verwenden, ohne Kenntnisse über deren
interne Funktionsweise zu haben.

Die einzelnen Komponenten, die geplant waren, wurden alle implementiert und zumindest teilweise
getestet.
Die Spiellogikgruppe konnte mit einem Simulator demonstrieren, dass die einzelnen Spielmodi das
Soll-Verhalten aufweisen und die Hardware-Gruppe konnte mit Hilfe von Testtreibern demonstrieren,
dass Infrarotabschüsse an den Services-Client durchgereicht und LED-Events korrekt angezeigt werden.
Die Services-Gruppe hat die Funktionalität der Webseite demonstriert, indem sie manuell Einträge in
die Datenbank hinzufügten und bestätigten, dass jene Änderungen auf der Webseite übernommen werden.
Auch grundlegende Client-Server-Kommunikation war möglich.

Die Integration der Komponenten ist unvollständig.
Es lässt sich nachweisen, dass der Server mit LUA kommuniziert.
Allerdings lassen Logs darauf schließen, dass Parameter in der falschen Reihenfolge an LUA
weitergegeben werden.
Die Webseite-zu-Server-Integration über die Datenbank funktioniert für einfache Spielmodi, bei
komplexeren bringen jedoch Deadlocks von Mutex-Objekten den Server zum Absturz.
Es kam außerdem zu diversen Fehlern bei Zugriffen des Servers auf die Datenbank.
Der Services-Server und der Services-Client können sich miteinander verbinden und
Abschussinformationen werden ausgetauscht.
Allerdings führt ein Verbindungsverlust des Clients zurzeit noch dazu, dass der zugehörige Spieler
sich nicht mehr mit dem Spiel verbinden kann.
Diese Problem machen derzeit einen Neustart der Systemd-Units auf allen Geräten notwendig, wenn ein
neues Spiel gestartet wird.
Die Verbindung der Client/Server-Programme mit Systemd ist noch instabil.
Es dauert teilweise Minuten, bis eine Unit gestoppt werden kann.
Die Hardware-API ist in der Lage, zuverlässig Abschussinformationen an den Services-Client
weiterzugeben.
Allerdings werden derzeit keine LED-Events an die Hardware-API gesendet.
Die Integration der Hardware-API mit der darunter liegenden Hardware und Systemd ist stabil und
verursacht keine Probleme.
